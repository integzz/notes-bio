# 打造 MacOS/Linux 优雅终端

## Oh-My-Zsh

Zsh 是公认的终极 Shell，其因强大的补全功能、高度的可定制性以及良好的扩展性，被众多开发者极力推崇。不过 Zsh 的配置相对繁琐，而 Oh-My-Zsh 为此提供了最佳解决方案。

如今，因为 WSL 的出现，Windows 的用户也可享用这一福利了。

### 安装

推荐使用 Homebrew 安装，详见 [[cmd_homebrew]]。

```bash
# 安装 Zsh
brew install zsh
# 安装 Oh-My-Zsh
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

关于 Oh-My-Zsh 更多信息，可前往 [官网](https://ohmyz.sh/)。

### 配置

打开`~/.zshrc`，添加：

```bash
# 导入 bash 配置
source ~/.bash_profile
# linux
# source ~/.bashrc

# 别名
alias ua="unalias"
alias py="python"
alias man="tldr"
alias bat="cat"
alias find="fd"

# 引入环境变量
export PATH = "/usr/local/share/npm/bin:$PATH"
export PATH = "/usr/local/opt/ruby/bin:$PATH"
export PATH = "/usr/local/opt/sqlite/bin:$PATH"
```

### 报错

```bash
# 升级失败
cd ~/.oh-my-zsh
git status
git stash
upgrade_oh_my_zsh
```

## Zsh 扩展

Zsh 有很好的扩展性，这里推荐 3 个最常用的扩展

- zsh-autosuggestions（补全提示）
- zsh-syntax-highlighting（高亮）
- zsh-completions（补全）

### 安装

首先安装链接扩展

```bash
brew install zsh-autosuggestions zsh-syntax-highlighting zsh-completions
```

也可以选择源码安装

```bash
# zsh-autosuggestions
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
# zsh-syntax-highlighting
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
# zsh-completions
git clone https://github.com/zsh-users/zsh-completions ${ZSH_CUSTOM:=~/.oh-my-zsh/custom}/plugins/zsh-completions
```

### 整合

在 `~/.zshrc` 中添加：

```bash
plugins=(zsh-autosuggestions zsh-syntax-highlighting zsh-completions)

source /usr/local/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

autoload -U compinit && compinit
```

## Powerlevel10k

Powerlevel10k 脱胎于最为流行的 Zsh 主题 Powerlevel9k，转世之后，其加载速度更快，且可定制度更高，且，自带了配置向导，非常方便。

### 安装

```bash
brew install integzz/chinese/powerlevel10k
```

### 配置

在`~/.zshrc`中添加：

```bash
ZSH_THEME="powerlevel10k/powerlevel10k"
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
```

- 启动配置向导

```bash
p10k configure
```

- 查看颜色代号

```bash
for i in {0..255}; do print -Pn "%K{$i}  %k%F{$i}${(l:3::0:)i}%f " ${${(M)$((i%6)):#3}:+$'\n'}; done
```

### 自定义方案

在`~/.p10k.zsh`中更改：

```bash
# symbols
typeset -g POWERLEVEL9K_STATUS_OK_VISUAL_IDENTIFIER_EXPANSION =' ✔'
typeset -g POWERLEVEL9K_STATUS_OK_PIPE_VISUAL_IDENTIFIER_EXPANSION =' ✔'
# git
typeset -g POWERLEVEL9K_VCS_CLEAN_BACKGROUND=2
typeset -g POWERLEVEL9K_VCS_MODIFIED_BACKGROUND=3
typeset -g POWERLEVEL9K_VCS_UNTRACKED_BACKGROUND=9
typeset -g POWERLEVEL9K_VCS_CONFLICTED_BACKGROUND=1
typeset -g POWERLEVEL9K_VCS_LOADING_BACKGROUND=8
# band
typeset -g POWERLEVEL9K_DIR_BACKGROUND=4
typeset -g POWERLEVEL9K_DIR_FOREGROUND=15
typeset -g POWERLEVEL9K_TIME_FOREGROUND=15
typeset -g POWERLEVEL9K_TIME_BACKGROUND=4
typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_FOREGROUND=0
typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_BACKGROUND=11
typeset -g POWERLEVEL9K_ANACONDA_FOREGROUND=15
typeset -g POWERLEVEL9K_ANACONDA_BACKGROUND=9
typeset -g POWERLEVEL9K_STATUS_ERROR_FOREGROUND=1
typeset -g POWERLEVEL9K_STATUS_ERROR_BACKGROUND=0
```

![oh-my-zsh](images/terminal/zsh.png)

## 其他配置

### 大小写敏感

```bash
echo "set completion-ignore-case On" >> ~/.inputrc
```

[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
[//begin]: # 'Autogenerated link references for markdown compatibility'
[cmd_homebrew]: cmd_homebrew '搭建 MacOS/Linux 统一开发环境（Homebrew）'
[//end]: # 'Autogenerated link references'
